<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ğŸ“– åŒè¯­åœ£ç»é˜…è¯» Bible Reading</title>
  <style>
    body {
      background: #f4f4f4;
      font-family: "Noto Sans SC", sans-serif;
      text-align: center;
      margin: 0;
      padding: 0;
    }
    header {
      background-color: #2c3e50;
      color: white;
      padding: 20px;
      font-size: 24px;
    }
    main {
      margin: 20px auto;
      max-width: 800px;
      background: white;
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    input, select {
      padding: 10px;
      width: 70%;
      border-radius: 5px;
      border: 1px solid #ccc;
      margin-bottom: 10px;
    }
    button {
      padding: 10px 15px;
      background-color: #3498db;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      margin: 5px;
    }
    button:hover { background-color: #2980b9; }
    .verse {
      margin-top: 20px;
      font-size: 18px;
      color: #333;
      line-height: 1.6;
      text-align: left;
      white-space: pre-wrap;
    }
    footer {
      margin-top: 40px;
      font-size: 14px;
      color: gray;
      padding-bottom: 20px;
    }
    hr { margin: 25px 0; }
    .nav-buttons { margin-top: 15px; }
  </style>
</head>
<body>
  <header>ğŸ“– åŒè¯­åœ£ç»é˜…è¯» Bible Reading</header>
  <main>
    <h3>âœ¨ ä»Šæ—¥é‡‘å¥</h3>
    <p id="daily-verse">åŠ è½½ä¸­...</p>

    <hr>

    <h3>ğŸ” æœç´¢ç»æ–‡</h3>
    <input id="query" placeholder="ä¾‹å¦‚ï¼šçº¦ç¿°ç¦éŸ³ 3:16">
    <button onclick="searchVerse()">æœç´¢</button>
    <div class="verse" id="search-result"></div>

    <hr>

    <h3>ğŸ“˜ é˜…è¯»æ•´ç« åœ£ç»ï¼ˆä¸­è‹±åŒè¯­ï¼‰</h3>
    <select id="book"></select>
    <input id="chapter" type="number" placeholder="ç« èŠ‚å· (ä¾‹å¦‚ 1)">
    <button onclick="readChapter()">é˜…è¯»</button>

    <div class="nav-buttons">
      <button onclick="prevChapter()">â¬…ï¸ ä¸Šä¸€ç« </button>
      <button onclick="nextChapter()">â¡ï¸ ä¸‹ä¸€ç« </button>
    </div>

    <div class="verse" id="chapter-result"></div>
  </main>

  <footer>Â© 2025 åœ£ç»ç½‘ç«™ | æ„¿ä¸»èµç¦ä¸ä½ </footer>

  <script>
    // ä¸­æ–‡-è‹±æ–‡ä¹¦å·å¯¹ç…§è¡¨
    const bookMap = {
      "åˆ›ä¸–è®°":"Genesis","å‡ºåŸƒåŠè®°":"Exodus","åˆ©æœªè®°":"Leviticus","æ°‘æ•°è®°":"Numbers","ç”³å‘½è®°":"Deuteronomy",
      "çº¦ä¹¦äºšè®°":"Joshua","å£«å¸ˆè®°":"Judges","è·¯å¾—è®°":"Ruth","æ’’æ¯è€³è®°ä¸Š":"1 Samuel","æ’’æ¯è€³è®°ä¸‹":"2 Samuel",
      "åˆ—ç‹çºªä¸Š":"1 Kings","åˆ—ç‹çºªä¸‹":"2 Kings","å†ä»£å¿—ä¸Š":"1 Chronicles","å†ä»£å¿—ä¸‹":"2 Chronicles",
      "ä»¥æ–¯æ‹‰è®°":"Ezra","å°¼å¸Œç±³è®°":"Nehemiah","ä»¥æ–¯å¸–è®°":"Esther","çº¦ä¼¯è®°":"Job","è¯—ç¯‡":"Psalms",
      "ç®´è¨€":"Proverbs","ä¼ é“ä¹¦":"Ecclesiastes","é›…æ­Œ":"Song of Solomon","ä»¥èµ›äºšä¹¦":"Isaiah",
      "è€¶åˆ©ç±³ä¹¦":"Jeremiah","è€¶åˆ©ç±³å“€æ­Œ":"Lamentations","ä»¥è¥¿ç»“ä¹¦":"Ezekiel","ä½†ä»¥ç†ä¹¦":"Daniel",
      "ä½•è¥¿é˜¿ä¹¦":"Hosea","çº¦ç¥ä¹¦":"Joel","é˜¿æ‘©å¸ä¹¦":"Amos","ä¿„å·´åº•äºšä¹¦":"Obadiah","çº¦æ‹¿ä¹¦":"Jonah",
      "å¼¥è¿¦ä¹¦":"Micah","é‚£é¸¿ä¹¦":"Nahum","å“ˆå·´è°·ä¹¦":"Habakkuk","è¥¿ç•ªé›…ä¹¦":"Zephaniah","å“ˆè¯¥ä¹¦":"Haggai",
      "æ’’è¿¦åˆ©äºšä¹¦":"Zechariah","ç›æ‹‰åŸºä¹¦":"Malachi",
      "é©¬å¤ªç¦éŸ³":"Matthew","é©¬å¯ç¦éŸ³":"Mark","è·¯åŠ ç¦éŸ³":"Luke","çº¦ç¿°ç¦éŸ³":"John","ä½¿å¾’è¡Œä¼ ":"Acts",
      "ç½—é©¬ä¹¦":"Romans","å“¥æ—å¤šå‰ä¹¦":"1 Corinthians","å“¥æ—å¤šåä¹¦":"2 Corinthians","åŠ æ‹‰å¤ªä¹¦":"Galatians",
      "ä»¥å¼—æ‰€ä¹¦":"Ephesians","è…“ç«‹æ¯”ä¹¦":"Philippians","æ­Œç½—è¥¿ä¹¦":"Colossians","å¸–æ’’ç½—å°¼è¿¦å‰ä¹¦":"1 Thessalonians",
      "å¸–æ’’ç½—å°¼è¿¦åä¹¦":"2 Thessalonians","ææ‘©å¤ªå‰ä¹¦":"1 Timothy","ææ‘©å¤ªåä¹¦":"2 Timothy","æå¤šä¹¦":"Titus",
      "è…“åˆ©é—¨ä¹¦":"Philemon","å¸Œä¼¯æ¥ä¹¦":"Hebrews","é›…å„ä¹¦":"James","å½¼å¾—å‰ä¹¦":"1 Peter","å½¼å¾—åä¹¦":"2 Peter",
      "çº¦ç¿°ä¸€ä¹¦":"1 John","çº¦ç¿°äºŒä¹¦":"2 John","çº¦ç¿°ä¸‰ä¹¦":"3 John","çŠ¹å¤§ä¹¦":"Jude","å¯ç¤ºå½•":"Revelation"
    };

    const bookSelect = document.getElementById("book");
    Object.keys(bookMap).forEach(b => {
      const opt = document.createElement("option");
      opt.value = b;
      opt.textContent = b;
      bookSelect.appendChild(opt);
    });

    let currentBook = "";
    let currentChapter = 1;

    // è·å–æ¯æ—¥é‡‘å¥ï¼ˆè‹±ä¸­åŒè¯­ï¼‰
    async function getDailyVerse() {
      try {
        const resEN = await fetch("https://bible-api.com/john+3:16");
        const dataEN = await resEN.json();
        const resCN = await fetch("https://bible-api.com/john+3:16?translation=ccb");
        const dataCN = await resCN.json();
        document.getElementById("daily-verse").innerText = `${dataCN.reference}ï¼š\n${dataCN.text}\n\n${dataEN.text}`;
      } catch {
        document.getElementById("daily-verse").innerText = "æ— æ³•åŠ è½½æ¯æ—¥é‡‘å¥ï¼Œè¯·ç¨åå†è¯•ã€‚";
      }
    }

    // æœç´¢ç»æ–‡ï¼ˆåŒè¯­ï¼‰
    async function searchVerse() {
      let query = document.getElementById("query").value.trim();
      if (!query) return alert("è¯·è¾“å…¥ç« èŠ‚ï¼Œä¾‹å¦‚ çº¦ç¿°ç¦éŸ³ 3:16");
      for (const [cn, en] of Object.entries(bookMap)) {
        if (query.includes(cn)) {
          query = query.replace(cn, en);
          break;
        }
      }
      const resEN = await fetch(`https://bible-api.com/${encodeURIComponent(query)}`);
      const resCN = await fetch(`https://bible-api.com/${encodeURIComponent(query)}?translation=ccb`);
      const dataEN = await resEN.json();
      const dataCN = await resCN.json();
      if (dataEN.text && dataCN.text) {
        document.getElementById("search-result").innerText =
          `${dataCN.reference}\n\nä¸­æ–‡ï¼š${dataCN.text}\n\nEnglish: ${dataEN.text}`;
      } else {
        document.getElementById("search-result").innerText = "æœªæ‰¾åˆ°ç»æ–‡ï¼Œè¯·æ£€æŸ¥è¾“å…¥ã€‚";
      }
    }

    // é˜…è¯»æ•´ç« ï¼ˆä¸­è‹±åŒè¯­ï¼‰
    async function readChapter(book = null, chapter = null) {
      currentBook = book || document.getElementById("book").value;
      currentChapter = parseInt(chapter || document.getElementById("chapter").value.trim()) || 1;
      const bookEN = bookMap[currentBook];
      const apiEN = `https://bible-api.com/${encodeURIComponent(bookEN)}+${currentChapter}`;
      const apiCN = `https://bible-api.com/${encodeURIComponent(bookEN)}+${currentChapter}?translation=ccb`;

      document.getElementById("chapter-result").innerText = "åŠ è½½ä¸­...";

      const [resEN, resCN] = await Promise.all([fetch(apiEN), fetch(apiCN)]);
      const dataEN = await resEN.json();
      const dataCN = await resCN.json();

      if (dataEN.verses && dataCN.verses) {
        let combined = `${dataCN.reference}\n\n`;
        for (let i = 0; i < dataEN.verses.length; i++) {
          const vCN = dataCN.verses[i];
          const vEN = dataEN.verses[i];
          if (vCN && vEN) {
            combined += `${vCN.verse}. ${vCN.text}\n${vEN.text}\n\n`;
          }
        }
        document.getElementById("chapter-result").innerText = combined;
      } else {
        document.getElementById("chapter-result").innerText = "æœªæ‰¾åˆ°è¯¥ç« èŠ‚ï¼Œè¯·æ£€æŸ¥è¾“å…¥ã€‚";
      }
    }

    function prevChapter() {
      if (currentChapter > 1) {
        currentChapter--;
        readChapter(currentBook, currentChapter);
        document.getElementById("chapter").value = currentChapter;
      }
    }

    function nextChapter() {
      currentChapter++;
      readChapter(currentBook, currentChapter);
      document.getElementById("chapter").value = currentChapter;
    }

    getDailyVerse();
  </script>
</body>
</html>
